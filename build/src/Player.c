/* Player.c generated by valac 0.34.8, the Vala compiler
 * generated from Player.gs, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <SDL2/SDL_render.h>
#include <SDL2/SDL_surface.h>
#include <float.h>
#include <math.h>
#include <SDL2/SDL_rect.h>
#include <stdlib.h>
#include <string.h>
#include <SDL2/SDL_pixels.h>

typedef struct _Player Player;

#define TYPE_POINT2D (point2d_get_type ())
typedef struct _Point2d Point2d;

#define TYPE_VECTOR2D (vector2d_get_type ())
typedef struct _Vector2d Vector2d;

#define TYPE_TIMER (timer_get_type ())
typedef struct _Timer Timer;

#define TYPE_BODY_PART (body_part_get_type ())
typedef struct _BodyPart BodyPart;
#define _SDL_FreeSurface0(var) ((var == NULL) ? NULL : (var = (SDL_FreeSurface (var), NULL)))
#define _SDL_DestroyTexture0(var) ((var == NULL) ? NULL : (var = (SDL_DestroyTexture (var), NULL)))

#define TYPE_ENTITY (entity_get_type ())

#define TYPE_CATEGORY (category_get_type ())

#define TYPE_ACTOR (actor_get_type ())

#define TYPE_SPRITE (sprite_get_type ())
typedef struct _Sprite Sprite;

#define TYPE_HEALTH (health_get_type ())
typedef struct _Health Health;
typedef struct _Entity Entity;

struct _Point2d {
	gdouble x;
	gdouble y;
};

struct _Vector2d {
	gdouble x;
	gdouble y;
};

struct _Timer {
	gint begin;
	gint finish;
	gint best;
};

struct _Player {
	gint retainCount__;
	SDL_Texture* texture;
	SDL_Surface* source;
	Point2d pos;
	Vector2d vel;
	Timer time;
	gboolean first;
};

struct _BodyPart {
	SDL_Rect source;
	SDL_Rect dest;
	SDL_RendererFlip flip;
};

typedef enum  {
	CATEGORY_BACKGROUND = 0,
	CATEGORY_BULLET = 1,
	CATEGORY_ENEMY = 2,
	CATEGORY_EXPLOSION = 3,
	CATEGORY_PARTICLE = 4,
	CATEGORY_PLAYER = 5
} Category;

typedef enum  {
	ACTOR_DEFAULT = 0,
	ACTOR_BACKGROUND = 1,
	ACTOR_TEXT = 2,
	ACTOR_LIVES = 3,
	ACTOR_ENEMY1 = 4,
	ACTOR_ENEMY2 = 5,
	ACTOR_ENEMY3 = 6,
	ACTOR_PLAYER = 7,
	ACTOR_BULLET = 8,
	ACTOR_EXPLOSION = 9,
	ACTOR_BANG = 10,
	ACTOR_PARTICLE = 11,
	ACTOR_HUD = 12
} Actor;

struct _Sprite {
	SDL_Texture* texture;
	gint width;
	gint height;
};

struct _Health {
	gint curHealth;
	gint maxHealth;
};

struct _Entity {
	gint id;
	gchar* name;
	gboolean active;
	Category category;
	Actor actor;
	Point2d position;
	SDL_Rect bounds;
	Sprite sprite;
	Vector2d* scale;
	SDL_Color* tint;
	Timer* expires;
	Health* health;
	Vector2d* velocity;
};



void player_release (Player* self);
Player* player_retain (Player* self);
void player_free (Player* self);
GType point2d_get_type (void) G_GNUC_CONST;
Point2d* point2d_dup (const Point2d* self);
void point2d_free (Point2d* self);
GType vector2d_get_type (void) G_GNUC_CONST;
Vector2d* vector2d_dup (const Vector2d* self);
void vector2d_free (Vector2d* self);
GType timer_get_type (void) G_GNUC_CONST;
Timer* timer_dup (const Timer* self);
void timer_free (Timer* self);
static void player_instance_init (Player * self);
Player* player_retain (Player* self);
void player_release (Player* self);
void player_release (Player* self);
Player* player_retain (Player* self);
void player_free (Player* self);
Player* player_new (SDL_Texture* texture, SDL_Surface* surface);
void player_restart (Player* self);
void point2d (gdouble x, gdouble y, Point2d* result);
void vector2d (gdouble x, gdouble y, Vector2d* result);
void player_render (Player* self, SDL_Renderer* renderer, SDL_Texture* texture, Point2d* pos);
SDL_Texture* player_composite (Player* self, SDL_Renderer* renderer);
GType body_part_get_type (void) G_GNUC_CONST;
BodyPart* body_part_dup (const BodyPart* self);
void body_part_free (BodyPart* self);
BodyPart* player_bodyParts (Player* self, gint x, gint y, int* result_length1);
void bodypart (SDL_Rect* source, SDL_Rect* dest, SDL_RendererFlip flip, BodyPart* result);
void rect (gint x, gint y, gint h, gint w, SDL_Rect* result);
GType entity_get_type (void) G_GNUC_CONST;
GType category_get_type (void) G_GNUC_CONST;
GType actor_get_type (void) G_GNUC_CONST;
GType sprite_get_type (void) G_GNUC_CONST;
Sprite* sprite_dup (const Sprite* self);
void sprite_free (Sprite* self);
GType health_get_type (void) G_GNUC_CONST;
Health* health_dup (const Health* self);
void health_free (Health* self);
Entity* entity_dup (const Entity* self);
void entity_free (Entity* self);
void entity_copy (const Entity* self, Entity* dest);
void entity_destroy (Entity* self);
void player_entity (Player* self, SDL_Renderer* renderer, Entity* result);
void CreatePlayer (SDL_Texture* texture, gint h, gint w, Entity* result);


Player* player_retain (Player* self) {
	Player* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_atomic_int_add ((volatile gint *) (&self->retainCount__), 1);
	result = self;
	return result;
}


void player_release (Player* self) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_atomic_int_dec_and_test ((volatile gint *) (&self->retainCount__));
	if (_tmp0_) {
		player_free (self);
	}
}


Player* player_new (SDL_Texture* texture, SDL_Surface* surface) {
	Player* self;
	SDL_Texture* _tmp0_ = NULL;
	SDL_Surface* _tmp1_ = NULL;
	g_return_val_if_fail (texture != NULL, NULL);
	g_return_val_if_fail (surface != NULL, NULL);
	self = g_slice_new0 (Player);
	player_instance_init (self);
	_tmp0_ = texture;
	self->texture = _tmp0_;
	_tmp1_ = surface;
	self->source = _tmp1_;
	player_restart (self);
	return self;
}


void player_restart (Player* self) {
	Point2d _tmp0_ = {0};
	Vector2d _tmp1_ = {0};
	g_return_if_fail (self != NULL);
	point2d ((gdouble) 170, (gdouble) 500, &_tmp0_);
	self->pos = _tmp0_;
	vector2d ((gdouble) 0, (gdouble) 0, &_tmp1_);
	self->vel = _tmp1_;
	self->time.begin = -1;
	self->time.finish = -1;
}


void player_render (Player* self, SDL_Renderer* renderer, SDL_Texture* texture, Point2d* pos) {
	SDL_Renderer* _tmp0_ = NULL;
	SDL_Texture* _tmp1_ = NULL;
	Point2d _tmp2_ = {0};
	gdouble _tmp3_ = 0.0;
	Point2d _tmp4_ = {0};
	gdouble _tmp5_ = 0.0;
	SDL_Rect _tmp6_ = {0};
	g_return_if_fail (self != NULL);
	g_return_if_fail (renderer != NULL);
	g_return_if_fail (texture != NULL);
	g_return_if_fail (pos != NULL);
	_tmp0_ = renderer;
	_tmp1_ = texture;
	_tmp2_ = *pos;
	_tmp3_ = _tmp2_.x;
	_tmp4_ = *pos;
	_tmp5_ = _tmp4_.y;
	_tmp6_.x = ((gint) _tmp3_) - 48;
	_tmp6_.y = ((gint) _tmp5_) - 48;
	_tmp6_.w = (guint) 96;
	_tmp6_.h = (guint) 96;
	SDL_RenderCopy (_tmp0_, _tmp1_, NULL, &_tmp6_);
}


SDL_Texture* player_composite (Player* self, SDL_Renderer* renderer) {
	SDL_Texture* result = NULL;
	guint32 flags = 0U;
	guint32 rmask = 0U;
	guint32 gmask = 0U;
	guint32 bmask = 0U;
	guint32 amask = 0U;
	SDL_Surface* surface = NULL;
	guint32 _tmp0_ = 0U;
	guint32 _tmp1_ = 0U;
	guint32 _tmp2_ = 0U;
	guint32 _tmp3_ = 0U;
	guint32 _tmp4_ = 0U;
	SDL_Surface* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	BodyPart* _tmp7_ = NULL;
	SDL_Texture* texture = NULL;
	SDL_Renderer* _tmp14_ = NULL;
	SDL_Surface* _tmp15_ = NULL;
	SDL_Texture* _tmp16_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (renderer != NULL, NULL);
	flags = (guint32) 0x00010000;
	rmask = (guint32) 0x000000ff;
	gmask = (guint32) 0x0000ff00;
	bmask = (guint32) 0x00ff0000;
	amask = (guint32) 0xff000000LL;
	_tmp0_ = flags;
	_tmp1_ = rmask;
	_tmp2_ = gmask;
	_tmp3_ = bmask;
	_tmp4_ = amask;
	_tmp5_ = SDL_CreateRGBSurface (_tmp0_, 96, 96, 32, _tmp1_, _tmp2_, _tmp3_, _tmp4_);
	surface = _tmp5_;
	_tmp7_ = player_bodyParts (self, 48, 48, &_tmp6_);
	{
		BodyPart* part_collection = NULL;
		gint part_collection_length1 = 0;
		gint _part_collection_size_ = 0;
		gint part_it = 0;
		part_collection = _tmp7_;
		part_collection_length1 = _tmp6_;
		for (part_it = 0; part_it < _tmp6_; part_it = part_it + 1) {
			BodyPart part = {0};
			part = part_collection[part_it];
			{
				SDL_Surface* _tmp8_ = NULL;
				BodyPart _tmp9_ = {0};
				SDL_Rect _tmp10_ = {0};
				SDL_Surface* _tmp11_ = NULL;
				BodyPart _tmp12_ = {0};
				SDL_Rect _tmp13_ = {0};
				_tmp8_ = self->source;
				_tmp9_ = part;
				_tmp10_ = _tmp9_.source;
				_tmp11_ = surface;
				_tmp12_ = part;
				_tmp13_ = _tmp12_.dest;
				SDL_BlitScaled (_tmp8_, &_tmp10_, _tmp11_, &_tmp13_);
			}
		}
		part_collection = (g_free (part_collection), NULL);
	}
	_tmp14_ = renderer;
	_tmp15_ = surface;
	_tmp16_ = SDL_CreateTextureFromSurface (_tmp14_, _tmp15_);
	texture = _tmp16_;
	result = texture;
	_SDL_FreeSurface0 (surface);
	return result;
}


BodyPart* player_bodyParts (Player* self, gint x, gint y, int* result_length1) {
	BodyPart* result = NULL;
	SDL_Rect _tmp0_ = {0};
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	SDL_Rect _tmp3_ = {0};
	BodyPart _tmp4_ = {0};
	SDL_Rect _tmp5_ = {0};
	gint _tmp6_ = 0;
	gint _tmp7_ = 0;
	SDL_Rect _tmp8_ = {0};
	BodyPart _tmp9_ = {0};
	SDL_Rect _tmp10_ = {0};
	gint _tmp11_ = 0;
	gint _tmp12_ = 0;
	SDL_Rect _tmp13_ = {0};
	BodyPart _tmp14_ = {0};
	SDL_Rect _tmp15_ = {0};
	gint _tmp16_ = 0;
	gint _tmp17_ = 0;
	SDL_Rect _tmp18_ = {0};
	BodyPart _tmp19_ = {0};
	SDL_Rect _tmp20_ = {0};
	gint _tmp21_ = 0;
	gint _tmp22_ = 0;
	SDL_Rect _tmp23_ = {0};
	BodyPart _tmp24_ = {0};
	SDL_Rect _tmp25_ = {0};
	gint _tmp26_ = 0;
	gint _tmp27_ = 0;
	SDL_Rect _tmp28_ = {0};
	BodyPart _tmp29_ = {0};
	SDL_Rect _tmp30_ = {0};
	gint _tmp31_ = 0;
	gint _tmp32_ = 0;
	SDL_Rect _tmp33_ = {0};
	BodyPart _tmp34_ = {0};
	SDL_Rect _tmp35_ = {0};
	gint _tmp36_ = 0;
	gint _tmp37_ = 0;
	SDL_Rect _tmp38_ = {0};
	BodyPart _tmp39_ = {0};
	BodyPart* _tmp40_ = NULL;
	BodyPart* _tmp41_ = NULL;
	gint _tmp41__length1 = 0;
	g_return_val_if_fail (self != NULL, NULL);
	rect (192, 64, 64, 32, &_tmp0_);
	_tmp1_ = x;
	_tmp2_ = y;
	rect (_tmp1_ - 60, _tmp2_, 96, 48, &_tmp3_);
	bodypart (&_tmp0_, &_tmp3_, SDL_FLIP_NONE, &_tmp4_);
	rect (96, 0, 96, 96, &_tmp5_);
	_tmp6_ = x;
	_tmp7_ = y;
	rect (_tmp6_ - 48, _tmp7_ - 48, 96, 96, &_tmp8_);
	bodypart (&_tmp5_, &_tmp8_, SDL_FLIP_NONE, &_tmp9_);
	rect (192, 64, 64, 32, &_tmp10_);
	_tmp11_ = x;
	_tmp12_ = y;
	rect (_tmp11_ - 36, _tmp12_, 96, 48, &_tmp13_);
	bodypart (&_tmp10_, &_tmp13_, SDL_FLIP_NONE, &_tmp14_);
	rect (192, 32, 64, 32, &_tmp15_);
	_tmp16_ = x;
	_tmp17_ = y;
	rect (_tmp16_ - 60, _tmp17_, 96, 48, &_tmp18_);
	bodypart (&_tmp15_, &_tmp18_, SDL_FLIP_NONE, &_tmp19_);
	rect (0, 0, 96, 96, &_tmp20_);
	_tmp21_ = x;
	_tmp22_ = y;
	rect (_tmp21_ - 48, _tmp22_ - 48, 96, 96, &_tmp23_);
	bodypart (&_tmp20_, &_tmp23_, SDL_FLIP_NONE, &_tmp24_);
	rect (192, 32, 64, 32, &_tmp25_);
	_tmp26_ = x;
	_tmp27_ = y;
	rect (_tmp26_ - 36, _tmp27_, 96, 48, &_tmp28_);
	bodypart (&_tmp25_, &_tmp28_, SDL_FLIP_NONE, &_tmp29_);
	rect (64, 96, 32, 32, &_tmp30_);
	_tmp31_ = x;
	_tmp32_ = y;
	rect (_tmp31_ - 18, _tmp32_ - 21, 36, 36, &_tmp33_);
	bodypart (&_tmp30_, &_tmp33_, SDL_FLIP_NONE, &_tmp34_);
	rect (64, 96, 32, 32, &_tmp35_);
	_tmp36_ = x;
	_tmp37_ = y;
	rect (_tmp36_ - 6, _tmp37_ - 21, 36, 36, &_tmp38_);
	bodypart (&_tmp35_, &_tmp38_, SDL_FLIP_HORIZONTAL, &_tmp39_);
	_tmp40_ = g_new0 (BodyPart, 8);
	_tmp40_[0] = _tmp4_;
	_tmp40_[1] = _tmp9_;
	_tmp40_[2] = _tmp14_;
	_tmp40_[3] = _tmp19_;
	_tmp40_[4] = _tmp24_;
	_tmp40_[5] = _tmp29_;
	_tmp40_[6] = _tmp34_;
	_tmp40_[7] = _tmp39_;
	_tmp41_ = _tmp40_;
	_tmp41__length1 = 8;
	if (result_length1) {
		*result_length1 = _tmp41__length1;
	}
	result = _tmp41_;
	return result;
}


void player_entity (Player* self, SDL_Renderer* renderer, Entity* result) {
	SDL_Renderer* _tmp0_ = NULL;
	SDL_Texture* _tmp1_ = NULL;
	SDL_Texture* _tmp2_ = NULL;
	Entity _tmp3_ = {0};
	Entity _tmp4_ = {0};
	g_return_if_fail (self != NULL);
	g_return_if_fail (renderer != NULL);
	_tmp0_ = renderer;
	_tmp1_ = player_composite (self, _tmp0_);
	_tmp2_ = _tmp1_;
	CreatePlayer (_tmp2_, 96, 96, &_tmp3_);
	_tmp4_ = _tmp3_;
	_SDL_DestroyTexture0 (_tmp2_);
	*result = _tmp4_;
	return;
}


static void player_instance_init (Player * self) {
	self->retainCount__ = 1;
	self->first = TRUE;
}


void player_free (Player* self) {
	g_slice_free (Player, self);
}



