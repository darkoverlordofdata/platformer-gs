/* TextCache.c generated by valac 0.34.8, the Vala compiler
 * generated from TextCache.gs, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <SDL2/SDL_render.h>
#include <SDL_ttf.h>
#include <stdlib.h>
#include <string.h>
#include <SDL2/SDL_pixels.h>
#include <SDL2/SDL_surface.h>
#include <SDL2/SDL_rect.h>
#include <float.h>
#include <math.h>

#define _SDL_FreeSurface0(var) ((var == NULL) ? NULL : (var = (SDL_FreeSurface (var), NULL)))
#define _SDL_DestroyTexture0(var) ((var == NULL) ? NULL : (var = (SDL_DestroyTexture (var), NULL)))
typedef struct _Game Game;



void renderText (SDL_Renderer* renderer, TTF_Font* font, const gchar* text, gint x, gint y, int outline, SDL_Color color);
void sdlFailIf (gboolean cond, const gchar* reason);
void rect (gint x, gint y, gint h, gint w, SDL_Rect* result);
void game_release (Game* self);
Game* game_retain (Game* self);
void game_free (Game* self);
void renderTextCached (Game* game, const gchar* text, gint x, gint y, SDL_Color color);
gchar* formatTime (gint ticks);


void renderText (SDL_Renderer* renderer, TTF_Font* font, const gchar* text, gint x, gint y, int outline, SDL_Color color) {
	TTF_Font* _tmp0_ = NULL;
	int _tmp1_ = 0;
	SDL_Surface* surface = NULL;
	TTF_Font* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	SDL_Color _tmp4_ = {0};
	SDL_Surface* _tmp5_ = NULL;
	SDL_Surface* _tmp6_ = NULL;
	SDL_Surface* _tmp7_ = NULL;
	SDL_Color _tmp8_ = {0};
	guint8 _tmp9_ = 0U;
	SDL_Rect source = {0};
	SDL_Surface* _tmp10_ = NULL;
	gint _tmp11_ = 0;
	SDL_Surface* _tmp12_ = NULL;
	gint _tmp13_ = 0;
	SDL_Rect _tmp14_ = {0};
	SDL_Rect dest = {0};
	gint _tmp15_ = 0;
	int _tmp16_ = 0;
	gint _tmp17_ = 0;
	int _tmp18_ = 0;
	SDL_Surface* _tmp19_ = NULL;
	gint _tmp20_ = 0;
	SDL_Surface* _tmp21_ = NULL;
	gint _tmp22_ = 0;
	SDL_Rect _tmp23_ = {0};
	SDL_Texture* texture = NULL;
	SDL_Renderer* _tmp24_ = NULL;
	SDL_Surface* _tmp25_ = NULL;
	SDL_Texture* _tmp26_ = NULL;
	SDL_Texture* _tmp27_ = NULL;
	SDL_Renderer* _tmp28_ = NULL;
	SDL_Texture* _tmp29_ = NULL;
	SDL_Rect _tmp30_ = {0};
	SDL_Rect _tmp31_ = {0};
	g_return_if_fail (renderer != NULL);
	g_return_if_fail (font != NULL);
	g_return_if_fail (text != NULL);
	_tmp0_ = font;
	_tmp1_ = outline;
	TTF_SetFontStyle (_tmp0_, _tmp1_);
	_tmp2_ = font;
	_tmp3_ = text;
	_tmp4_ = color;
	_tmp5_ = TTF_RenderUTF8_Blended (_tmp2_, _tmp3_, _tmp4_);
	surface = _tmp5_;
	_tmp6_ = surface;
	sdlFailIf (_tmp6_ == NULL, "Could not render text surface");
	_tmp7_ = surface;
	_tmp8_ = color;
	_tmp9_ = _tmp8_.a;
	SDL_SetSurfaceAlphaMod (_tmp7_, _tmp9_);
	_tmp10_ = surface;
	_tmp11_ = _tmp10_->w;
	_tmp12_ = surface;
	_tmp13_ = _tmp12_->h;
	rect (0, 0, _tmp11_, _tmp13_, &_tmp14_);
	source = _tmp14_;
	_tmp15_ = x;
	_tmp16_ = outline;
	_tmp17_ = y;
	_tmp18_ = outline;
	_tmp19_ = surface;
	_tmp20_ = _tmp19_->w;
	_tmp21_ = surface;
	_tmp22_ = _tmp21_->h;
	rect (_tmp15_ - _tmp16_, _tmp17_ - _tmp18_, _tmp20_, _tmp22_, &_tmp23_);
	dest = _tmp23_;
	_tmp24_ = renderer;
	_tmp25_ = surface;
	_tmp26_ = SDL_CreateTextureFromSurface (_tmp24_, _tmp25_);
	texture = _tmp26_;
	_tmp27_ = texture;
	sdlFailIf (_tmp27_ == NULL, "Could not create texture from rendered text");
	_SDL_FreeSurface0 (surface);
	surface = NULL;
	_tmp28_ = renderer;
	_tmp29_ = texture;
	_tmp30_ = source;
	_tmp31_ = dest;
	SDL_RenderCopyEx (_tmp28_, _tmp29_, &_tmp30_, &_tmp31_, (gdouble) 0, NULL, SDL_FLIP_NONE);
	_SDL_DestroyTexture0 (texture);
	texture = NULL;
	_SDL_DestroyTexture0 (texture);
	_SDL_FreeSurface0 (surface);
}


void renderTextCached (Game* game, const gchar* text, gint x, gint y, SDL_Color color) {
	g_return_if_fail (game != NULL);
	g_return_if_fail (text != NULL);
}


gchar* formatTime (gint ticks) {
	gchar* result = NULL;
	gint mins = 0;
	gint _tmp0_ = 0;
	gint secs = 0;
	gint _tmp1_ = 0;
	gchar* _tmp2_ = NULL;
	_tmp0_ = ticks;
	mins = (_tmp0_ / 50) / 60;
	_tmp1_ = ticks;
	secs = (_tmp1_ / 50) % 60;
	_tmp2_ = g_strdup_printf ("%02d:%02d", (gint) mins, (gint) secs);
	result = _tmp2_;
	return result;
}



